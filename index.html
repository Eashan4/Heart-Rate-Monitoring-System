<!DOCTYPE html>
<html>
<head>
  <title>Health Monitoring</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.2/js/all.min.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #e0f7fa, #ffffff);
      animation: fadeIn 1s ease-in;
    }

    .container {
      max-width: 600px;
      margin: 40px auto;
      padding: 25px;
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      animation: slideUp 0.8s ease-out;
    }

    h1 {
      color: #008080;
      margin-bottom: 10px;
    }

    .sensor-box {
      padding: 18px;
      margin: 15px 0;
      background: #f1f3f5;
      border-radius: 12px;
      font-size: 1.6rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .sensor-box:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    }

    .sensor-label {
      font-size: 1rem;
      font-weight: bold;
      color: #444;
    }

    .value {
      font-weight: bold;
      font-size: 1.7rem;
    }

    .pulse {
      animation: pulse 1s infinite;
      color: #cc3300;
    }

    hr {
      margin: 15px 0;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.15); }
      100% { transform: scale(1); }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
  </style>

  <script>
    // ---- DEMO MODE ----
    const demoMode = true; // set false when using ESP8266 live data

    function random(min, max) {
      return (Math.random() * (max - min) + min).toFixed(1);
    }

    function updateDemoData() {
      document.getElementById("temp").innerText = random(24, 32) + " °C";
      document.getElementById("humidity").innerText = random(40, 70) + " %";
      document.getElementById("bpm").innerText = random(65, 95);
      document.getElementById("spo2").innerText = random(95, 99) + " %";
    }

    function updateLiveData() {
      fetch('/data')
        .then(res => res.json())
        .then(data => {
          document.getElementById("temp").innerText = data.temperature + " °C";
          document.getElementById("humidity").innerText = data.humidity + " %";
          document.getElementById("bpm").innerText = data.BPM;
          document.getElementById("spo2").innerText = data.SpO2;
        });
    }

    setInterval(() => {
      demoMode ? updateDemoData() : updateLiveData();
    }, 2000);
  </script>
</head>

<body>
  <div class="container">
    <h1>Heart Rate Monitoring System</h1>
    <hr>

    <div class="sensor-box">
      <span class="sensor-label">
        <i class="fas fa-thermometer-half" style="color:#0275d8"></i>
        Temperature
      </span>
      <span class="value" id="temp">--</span>
    </div>

    <div class="sensor-box">
      <span class="sensor-label">
        <i class="fas fa-tint" style="color:#5bc0de"></i>
        Humidity
      </span>
      <span class="value" id="humidity">--</span>
    </div>

    <div class="sensor-box">
      <span class="sensor-label">
        <i class="fas fa-heartbeat pulse"></i>
        Heart Rate
      </span>
      <span class="value" id="bpm">--</span>
    </div>

    <div class="sensor-box">
      <span class="sensor-label">
        <i class="fas fa-burn" style="color:#f7347a"></i>
        SpO₂
      </span>
      <span class="value" id="spo2">--</span>
    </div>
  </div>
</body>
</html>
